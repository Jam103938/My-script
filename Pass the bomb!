local OrionLib = loadstring(game:HttpGet(('https://raw.githubusercontent.com/shlexware/Orion/main/source')))()
local Window = OrionLib:MakeWindow({Name = "Pass the Bomb script Made it Open Source lol", HidePremium = false, SaveConfig = true, IntroText = Created by Jaimz | Pass the bomb, ConfigFolder = "OrionConfig"})

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")

local player = Players.LocalPlayer
local bombName = "Bomb"

local teleportEnabled = false
local autoTeleportEnabled = false
local teleportConnection

local function isHoldingBomb()
    return player.Character and player.Character:FindFirstChild(bombName) ~= nil
end

local function teleportToRandomPlayer()
    local otherPlayers = Players:GetPlayers()
    if #otherPlayers < 2 then return end

    local randomPlayer = otherPlayers[math.random(1, #otherPlayers)]
    while randomPlayer == player or (randomPlayer.Character and randomPlayer.Character:FindFirstChild(bombName)) do
        randomPlayer = otherPlayers[math.random(1, #otherPlayers)]
    end

    local destination = randomPlayer.Character and randomPlayer.Character:FindFirstChild("HumanoidRootPart")
    local character = player.Character and player.Character:FindFirstChild("HumanoidRootPart")

    if destination and character then
        character.CFrame = destination.CFrame
    end
end

local function teleportHandler()
    if teleportConnection then
        teleportConnection:Disconnect()
    end
    
    teleportConnection = RunService.Heartbeat:Connect(function()
        if teleportEnabled then
            if isHoldingBomb() then
                teleportToRandomPlayer()
            else
                -- Added anti-slip: teleport to a fixed position above the ground
                local character = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
                if character then
                    character.CFrame = CFrame.new(0, 50, 0)
                end
            end
        end
    end)
end

local function teleportTo(position)
    local character = player.Character or player.CharacterAdded:Wait()
    character:SetPrimaryPartCFrame(CFrame.new(position))
end

local function autoTeleport()
    while autoTeleportEnabled do
        for i = 0, 10 do
            local coin = Workspace.DisastersFolder:FindFirstChild("Coin" .. i)
            if coin then
                teleportTo(coin.Position)
                wait(1)
            end
        end
        wait(1)
    end
end

local function autoRemoveMeteor()
    while true do
        local meteor = Workspace:FindFirstChild("DisastersFolder") and Workspace.DisastersFolder:FindFirstChild("Meteor")
        if meteor then
            meteor:Destroy()
        end
        wait(1)
    end
end

coroutine.wrap(autoRemoveMeteor)()

local MainTab = Window:MakeTab({
    Name = "Main",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

MainTab:AddToggle({
    Name = "Enable Bomb Teleport(only open it if you were respawn there would be bunch of error)",
    Default = false,
    Callback = function(value)
        teleportEnabled = value
        if value then
            teleportHandler()
        end
    end
})

MainTab:AddToggle({
    Name = "Enable Auto Teleport to Coins",
    Default = false,
    Callback = function(value)
        autoTeleportEnabled = value
        if value then
            coroutine.wrap(autoTeleport)()
        end
    end
})

OrionLib:Init()
